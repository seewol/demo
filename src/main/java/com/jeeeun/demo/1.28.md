### 상품등록
- 단일등록과 옵션포함 상품등록으로 이분화가 아닌
- 하나의 api 에서 처리한다
``` json
{
  "stockQuantity": 1,
  "productName": "상품명",
  "optionType": "", # COMBINATION: 조합형, NONE: 기본생성, REQUIRED: 필수/선택형
  "price": {
    "salePrice": 10000 # 판매가
     "discountInfo": {
       "startYmdt": "2026-01-28 21:00:00",
       "endYmdt": "2026-01-30 21:00:00",
       "amount": 10000
     }
  },
  "images": ["test.img"],
  "option": {
    "option": {
        "isRequiredOption": true,
        "images": [],
        "optionQuantity": 100,
        "optionName": "",
        "optionNo": 123
    }
  }
}
```


### 빈리스트 검증 (서비스단)
미리 빈리스트인지 아닌지 검증을하면 서비스 오류를 막을 수 있다
=> 방어로직/방어코드
``` java
if (details.isEmpty()) {
    throw new BusinessException(ErrorCode.OPTION_DETAIL_REQUIRED);
}
```

### 회원가입 (signUp)
```markdown
┌─────────────────────────────────────────────────────────────────────┐
│                          Client (Browser)                           │
└─────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼ POST /api/users/signup
┌─────────────────────────────────────────────────────────────────────┐
│                        Controller Layer                             │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  @Valid UserRequest  →  Validation 수행                        │  │
│  │  • @NotBlank 검증                                              │  │
│  │  • 실패 시 MethodArgumentNotValidException (자동)               │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         Service Layer                               │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  UserService.signUp()                                          │  │
│  │  1. checkIdExists() - 아이디 중복 체크                          │  │
│  │  2. insertUser() - 비밀번호 암호화 후 저장                       │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         Mapper Layer                                │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  UserMapper (MySQL)                                          │  │
│  │  • isIdExists() - SELECT COUNT                                 │  │
│  │  • insertUser() - INSERT INTO users                            │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────┐
│                           Database                                  │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  users 테이블                                                   │  │
│  │  • user_id (UNIQUE)                                            │  │
│  │  • password (암호화됨)                                          │  │
│  │  • user_type                                                   │  │
│  │  • created_at                                                  │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────
```

### 실행 순서 (Sequence Diagram)
```markdown
Client          Controller        UserService       PasswordEncryptor     UserMapper         DB
  │                 │                  │                   │                  │              │
  │ POST /signup    │                  │                   │                  │              │
  │────────────────>│                  │                   │                  │              │
  │                 │                  │                   │                  │              │
  │                 │ @Valid 검증      │                   │                  │              │
  │                 │──────┐           │                   │                  │              │
  │                 │      │           │                   │                  │              │
  │                 │<─────┘           │                   │                  │              │
  │                 │                  │                   │                  │              │
  │                 │ signUp()         │                   │                  │              │
  │                 │─────────────────>│                   │                  │              │
  │                 │                  │                   │                  │              │
  │                 │                  │ checkIdExists()   │                  │              │
  │                 │                  │──────────────────────────────────────>│              │
  │                 │                  │                   │                  │ SELECT       │
  │                 │                  │                   │                  │─────────────>│
  │                 │                  │                   │                  │              │
  │                 │                  │                   │                  │<─────────────│
  │                 │                  │<──────────────────────────────────────│              │
  │                 │                  │                   │                  │              │
  │                 │                  │ encrypt()         │                  │              │
  │                 │                  │──────────────────>│                  │              │
  │                 │                  │                   │                  │              │
  │                 │                  │<──────────────────│                  │              │
  │                 │                  │                   │                  │              │
  │                 │                  │ insertUser()      │                  │              │
  │                 │                  │──────────────────────────────────────>│              │
  │                 │                  │                   │                  │ INSERT       │
  │                 │                  │                   │                  │─────────────>│
  │                 │                  │                   │                  │              │
  │                 │                  │                   │                  │<─────────────│
  │                 │                  │<──────────────────────────────────────│              │
  │                 │                  │                   │                  │              │
  │                 │<─────────────────│                   │                  │              │
  │                 │                  │                   │                  │              │
  │ 201 Created     │                  │                   │                  │              │
  │<────────────────│                  │                   │                  │              │3. 보완이 필요한 부분
```