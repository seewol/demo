## 1/11 수업
- 데이터 전달용 객체(DTO) => 자바 16부터 값 객체(Value Object) 간결하게 표현 문법

### record -컴파일 타임 자동으로 생성
  1. private final
  2. constructor 모든 필드를 받는 생성자
  3. getter
  4. equals, hashCode, toString() 자동생성

#### 아래 코드는 각각 동일
``` java
    public record CreateProductRequest(
        String name,
        String description,
        BigDecimal salePrice,
        Int stockQuantity,
    ) {}
```
``` java
   public class CreateProductRequest {
       private final String name;
       private final String description;
       private final BigDecimal salePrice;
       private final Int stockQuantity,
   }
```
---
``` java
   public record ProductVariantRequest (...) {}
```
``` java
   public static final class ProductVariantRequest {
       private final String variantName;
       ...
       public ProductVariantRequest(...) { ... }
   }
```
✔ 필드, 생성자, getter, equals/hashCode/toString 을 컴파일러가 자동으로 만들어주는 타입
``` java
   public record ProductCreateRequest(...) {
   
       // static 메서드도 올 수 있고
       public static Xxx example() { ... }
   
       // 타입 정의도 올 수 있음
       public record ProductVariantRequest(...) {}
   }
```
---
### record 를 request dto 로 쓰는 이유
1. 불변성 (immutable)
   - 생성 이후 값 변경 불가
   - 요청 데이터 중간에 변경 위험 제거
2. 의미 명확한 DTO
   - record는 행위 없는 데이터 전용 값 객체 표현 보장
   - request / response dto 최적

### request dto + validation 어노테이션
Bean Validation 표준 개념

``` java
@NotBlank
@Size(max = 50)
String name
```

검증은 언제 실행되는가?
``` java
public void create(@Valid @RequestBody CreateProductRequest request) {

}
```

1. JSON -> `CreateProductRequest` 변환
2. @Valid 감지
3. 필드에 선언된 Validation 어노테이션 검사
4. 실패 시 -> `MethodArgumentValidException` 발생
5. Controller 진입 전에 요청 차단